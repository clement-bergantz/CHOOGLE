
<div class="main-container">

  <div class="choogle-container">
    <div class="choogle-infos">
      <h1><%= @choogle.title %></h1>
      <p>Event date : <%= @choogle.happens_at %></p>
      <p>Due date : <%= @choogle.due_at %></p>

      <!-- Timer -->
      <p>Time left : </p>
      <div id="timer" data-timer="<%= (@choogle.due_at) %>">
        <%= render "choogles/timer"  %>
      </div>

      <!-- Liens with slug -->
    </div>

    <!-- All Proposals -->
    <% @choogle.proposals.each do |proposal| %>
      <div class="proposal">
      <!-- Link to upvote method with choogle and proposal in the route
           in this upvotes div for arrow and counter -->
        <%= link_to upvote_path(@choogle, proposal), remote: true, method: :post, class: "upvote" do %>
          <div class='proposal-upvote'>
            <div class="proposal-arrow"></div>
            <div class='proposal-count' id="proposal-<%= proposal.id %>"><%= proposal.upvotes_count %></div>
          </div>
        <% end %>
        <div class='proposal-body'>
          <h3><%= proposal.place.name %></h3>
          <!-- Implement 'display of all tags' after implementing the option to append many tags-->
          <% if proposal.proposal_tags.any? %>
            <% proposal.proposal_tags.each do |proposaltag| %>
            <h5 class="tags" style="background-color: <%= proposaltag.tag.color %>"><%= proposaltag.tag.name %></h5>
            <% end %>
          <% end %>
        </div>
        <ul class="list-inline proposal-controls hidden-sm hidden-xs">
          <li><a href=""><i class="fa fa-heart"></i></a></li>
          <li><a href=""><i class="fa fa-share"></i></a></li>
          <li><a href=""><i class="fa fa-star"></i></a></li>
        </ul>
      </div>
    <% end %>

    <!-- Emply Proposal add a new one -->
    <div class="proposal-empty" data-toggle="modal" data-target="#myModal">
      <div class='proposal-empty-body'>
        <h3>SUGGEST A NEW PLACE TO GO</h3>
      </div>
    </div>
  </div>

  <div class="map-container hidden-xs">
    <div id="map"></div>
  </div>
  <%= render "shared/map" %>
</div>

<!-- New Proposal Modal -->
<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
      </div>
      <div class="modal-body">
        <%= render "shared/proposal_form" %>
      </div>
    </div>
  </div>
</div>

<!-- Loading Google Places for Autocomplete on New Proposal Modal Form -->
<%= content_for(:after_js) do %>
  <script src="https://maps.googleapis.com/maps/api/js?libraries=places&amp;key=AIzaSyDUTmt0lPVV6UQEaPaFzlEV3yxfO43cxnI"></script>
<% end %>
